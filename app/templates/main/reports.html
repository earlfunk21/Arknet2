{% extends 'base.html' %}
{% block title %}Profile Page{% endblock %}


{% block body %}

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center bg-info bg-gradient bg-opacity-50">
    {% include 'includes/logo.html' %}
    {% include 'includes/search_bar.html' %}
    {% include 'includes/navbar.html' %}
  </header><!-- End Header -->

   <!-- ======= Sidebar ======= -->
   {% include 'includes/sidenav.html' %}


  <main id="main" class="main">

    <div class="pagetitle">
      <h1>Report</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="{{ url_for('main.dashboard') }}">Home</a></li>
          <li class="breadcrumb-item active">Reports</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

    <section class="section profile">
      <div class="row">
        <div class="col-lg-10 mx-auto">

          <div class="card">
            <div class="card-header bg-danger bg-gradient bg-opacity-50">
              <h5 class="card-title">All Reports</h5>
            </div>
            <div class="card-body">

              <!-- Accordion without outline borders -->
              <div class="accordion accordion-flush" id="accordionFlushExample">
                {% for report in reports.items %}
                  <div class="accordion-item">
                    <h3 class="accordion-header" id="flush-headingOne">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-{{ report.id }}" aria-expanded="false" aria-controls="flush-collapseOne">
                        <p>{{ report.user }}</p>
                      </button>
                      <p>{{ report.subject }}</p>
                    </h3>
                    <div id="flush-{{ report.id }}" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
                      <div class="accordion-body">{{ report.message }}</div>
                      <div class="accordion-footer d-flex justify-content-end text-secondary">{{ time_ago(report.date_reported) }}</div>
                    </div>
                  </div>
                {% endfor %}
              </div><!-- End Accordion without outline borders -->

            </div>
            <div class="card-footer">
              <div class="pagination d-flex justify-content-center my-6">
                {% if reports.has_prev %}
                  <a class="page-link border-0 rounded" href="{{ url_for('main.report_lists', page=reports.prev_num) }}">
                    <p><strong>Back</strong></p>
                  </a>
                {% endif %}
                {% if reports.has_next %}
                    <a class="page-link border-0 rounded" href="{{ url_for('main.report_lists', page=reports.next_num) }}">
                      <p><strong>More</strong></p>
                    </a>
                {% endif %}
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

  </main><!-- End #main -->

{% endblock %}